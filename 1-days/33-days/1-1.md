# 1 : 1 대화 구현

## TomatoClient

```java
public class TomatoClient extends JFrame implements ActionListener{
	String nickName = null;
	JButton jbtn_chat = new JButton("1:1 대화");
}
```

```java
public void initDisplay() {
    jbtn_change.addActionListener(this);
}    
```

```java
public void actionPerformed(ActionEvent e) {
   if(obj==jbtn_chat) {
			int row = jtb.getSelectedRow();
			if(row == -1) {//아무도 선택하지 않음
				JOptionPane.showMessageDialog(this, "귓속말할 상대를 선택하세요.","info",JOptionPane.INFORMATION_MESSAGE);
				return;
			}
			else {//상대를 선택했을때
				String name = (String)dtm.getValueAt(row, 0);
				//내가 나한테 귓속말하기는 차단시켜주세요.-요구사항
				if(name.equals(nickName)) {
					JOptionPane.showMessageDialog(this, "다른 상대를 선택하세요.","info",JOptionPane.INFORMATION_MESSAGE);
					return;
				}
				//다른사람을 선택했다면, 대화내용을 읽어 말한다.
					String msg1 = JOptionPane.showInputDialog("메세지를 입력하세요.");
				try {
					oos.writeObject(Protocol.WHISPER+"#"+nickName+"#"+name+"#"+msg1);
				} catch (Exception e2) {
					e2.printStackTrace();
				}
				//선택된 상대를 초기화하기
				jtb.clearSelection();
			}
		}
}
```

